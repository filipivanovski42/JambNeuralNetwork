<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jamb Neural Network</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <div style="display: flex; align-items: center; gap: 10px;">
                <h1>Jamb<span>LLM</span></h1>
                <button id="rulesBtn" class="header-btn" title="Game Rules">?</button>
            </div>
            <div class="engine-toggle">
                <span>Engine</span>
                <label class="switch">
                    <input type="checkbox" id="engineToggle" checked>
                    <span class="slider round"></span>
                </label>
            </div>
        </header>

        <!-- Main Game Area -->
        <main>
            <!-- Left: Scoreboard -->
            <section class="scoreboard-container">
                <table id="scoreTable">
                    <thead>
                        <tr>
                            <th></th>
                            <th>â‡© Down</th>
                            <th>â‡… Free</th>
                            <th>â‡§ Up</th>
                            <th>ðŸ“¢ Anno</th>
                        </tr>
                    </thead>
                    <tbody id="scoreBody">
                        <!-- Rows generated by JS -->
                    </tbody>
                    <tfoot>
                        <!-- Footer generated by JS now to include detailed subtotals -->
                    </tfoot>
                </table>
            </section>

            <!-- Right: Controls & Analysis -->
            <section class="controls-container">

                <!-- Dice Area -->
                <div class="dice-area" id="diceArea">
                    <div class="dice-row" id="diceContainer">
                        <!-- Dice generated by JS -->
                        <div class="die placeholder">?</div>
                        <div class="die placeholder">?</div>
                        <div class="die placeholder">?</div>
                        <div class="die placeholder">?</div>
                        <div class="die placeholder">?</div>
                        <div class="die placeholder">?</div>
                    </div>
                    <div class="roll-info">
                        Turns Left: <span id="rollsLeft">3</span>
                    </div>

                    <button id="editDiceBtn" class="edit-btn">Edit Dice</button>

                    <div style="margin-top: 15px;">
                        <button id="rollBtn" class="primary-btn">Roll Dice</button>
                        <button id="saveDiceBtn" class="primary-btn"
                            style="display: none; background: var(--accent);">Save Dice</button>
                    </div>
                </div>

                <!-- Analysis Panel -->
                <div class="analysis-panel" id="analysisPanel">
                    <h3>ðŸ§  Engine Analysis</h3>
                    <div id="suggestionsList" class="suggestions-list">
                        <div class="suggestion-item">
                            <span class="action">Loading...</span>
                            <span class="prob">--%</span>
                        </div>
                    </div>
                </div>

                <!-- Game Status -->
                <div id="gameStatus" class="status-msg"></div>
                <button id="newGameBtn" class="secondary-btn">New Game</button>

            </section>
        </main>
    </div>

    <!-- Rules Modal -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Jamb Rules (Special Variant)</h2>
            <hr style="border: 0; border-top: 1px solid var(--border); margin: 10px 0;">

            <h3>1. Columns</h3>
            <ul>
                <li><strong>Down (â‡©)</strong>: Must be filled top-to-bottom (1s â†’ Yamb).</li>
                <li><strong>Free (â‡…)</strong>: Can be filled in any order.</li>
                <li><strong>Up (â‡§)</strong>: Must be filled bottom-to-top (Yamb â†’ 1s).</li>
                <li><strong>Announce (ðŸ“¢)</strong>:
                    <ul>
                        <li><em>Announced</em>: Declare after Roll 1. Must score there.</li>
                        <li><em>Pure Hand</em>: If you roll all 6 dice (keep none) and get the result in one shot (even
                            on Roll 2 or 3), you can play here without announcing.</li>
                    </ul>
                </li>
            </ul>

            <h3>2. Scoring</h3>
            <ul>
                <li><strong>1-6</strong>: Sum of matching dice (max 5 dice). Bonus +30 if Sum >= 60.</li>
                <li><strong>Max</strong>: Sum of 5 highest dice.</li>
                <li><strong>Min</strong>: Sum of 5 lowest dice.</li>
                <li><strong>Formula</strong>: (Max - Min) * Ones.</li>
                <li><strong>Trips</strong>: 3 of a kind (3x + 20).</li>
                <li><strong>Straight</strong>: 1-5 (45 pts) or 2-6 (50 pts).</li>
                <li><strong>Full</strong>: 3 of a kind + 2 of another (Sum + 40).</li>
                <li><strong>Poker</strong>: 4 of a kind (4x + 50).</li>
                <li><strong>Yamb</strong>: 5 of a kind (5x + 60).</li>
            </ul>
        </div>
    </div>

    <script src="/static/game.js"></script>
</body>

</html>